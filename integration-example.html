<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOLO标注工具集成示例</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .demo-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        h2 {
            color: #333;
            margin-bottom: 20px;
        }
        pre {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .button-group {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            margin-right: 10px;
            border: none;
            background: #409eff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #66b1ff;
        }
        #annotation-container {
            width: 100%;
            height: 600px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>YOLO 标注工具集成示例</h1>
        
        <div class="demo-section">
            <h2>1. iframe 集成方式</h2>
            <p>最简单的集成方式，将标注工具作为 iframe 嵌入到您的系统中：</p>
            <pre><code>&lt;iframe 
    src="http://localhost:8080" 
    width="100%" 
    height="600"
    frameborder="0"
&gt;&lt;/iframe&gt;</code></pre>
            
            <div id="annotation-container">
                <iframe src="http://localhost:8080" width="100%" height="100%" frameborder="0"></iframe>
            </div>
        </div>

        <div class="demo-section">
            <h2>2. 通过 postMessage 通信</h2>
            <p>使用 postMessage API 与标注工具进行跨域通信：</p>
            <pre><code>// 向标注工具发送消息
const iframe = document.querySelector('iframe');
iframe.contentWindow.postMessage({
    type: 'LOAD_IMAGES',
    data: [
        { id: '1', url: 'image1.jpg', name: 'Image 1' },
        { id: '2', url: 'image2.jpg', name: 'Image 2' }
    ]
}, '*');

// 接收标注工具的消息
window.addEventListener('message', (event) => {
    if (event.data.type === 'ANNOTATIONS_READY') {
        console.log('收到标注数据:', event.data.annotations);
    }
});</code></pre>
            
            <div class="button-group">
                <button onclick="sendTestImages()">发送测试图片</button>
                <button onclick="requestAnnotations()">获取标注数据</button>
            </div>
        </div>

        <div class="demo-section">
            <h2>3. Vue 组件集成</h2>
            <p>如果您的主系统也是 Vue 项目，可以直接引入组件：</p>
            <pre><code>// 安装依赖
npm install --save yolo-annotation-tool

// 在 Vue 组件中使用
&lt;template&gt;
    &lt;div&gt;
        &lt;yolo-annotation-tool
            :images="images"
            :classes="customClasses"
            :api-config="apiConfig"
            @save="handleSave"
            @export="handleExport"
        /&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import YoloAnnotationTool from 'yolo-annotation-tool'

export default {
    components: { YoloAnnotationTool },
    data() {
        return {
            images: [],
            customClasses: [
                { id: 0, name: '人脸', color: '#FF6B6B' },
                { id: 1, name: '车牌', color: '#4ECDC4' }
            ],
            apiConfig: {
                baseUrl: 'https://your-api.com',
                token: 'your-auth-token'
            }
        }
    },
    methods: {
        handleSave(data) {
            console.log('保存标注数据:', data)
        },
        handleExport(data) {
            console.log('导出标注数据:', data)
        }
    }
}
&lt;/script&gt;</code></pre>
        </div>

        <div class="demo-section">
            <h2>4. API 集成配置</h2>
            <p>配置标注工具与后端 API 的对接：</p>
            <pre><code>// 环境变量配置 (.env)
VUE_APP_API_BASE_URL=https://your-api-server.com/api
VUE_APP_AUTH_TOKEN=your-auth-token

// API 接口实现示例
// POST /api/images/upload - 上传图片
// GET /api/images - 获取图片列表
// POST /api/annotations - 保存标注
// GET /api/annotations/:imageId - 获取标注
// GET /api/classes - 获取类别列表</code></pre>
        </div>

        <div class="demo-section">
            <h2>5. 数据格式说明</h2>
            <p>标注数据导出格式（YOLO）：</p>
            <pre><code>// 每行一个目标框
0 0.534375 0.446875 0.103125 0.20625
1 0.734375 0.646875 0.203125 0.30625

// 格式说明
&lt;class_id&gt; &lt;x_center&gt; &lt;y_center&gt; &lt;width&gt; &lt;height&gt;
// 所有值都是相对坐标（0-1范围）</code></pre>
        </div>
    </div>

    <script>
        // 示例：发送测试图片
        function sendTestImages() {
            const iframe = document.querySelector('iframe');
            const testImages = [
                {
                    id: 'test_1',
                    name: 'test_image_1.jpg',
                    url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                }
            ];
            
            // 注意：实际使用时需要处理跨域问题
            console.log('发送测试图片到标注工具...');
            alert('已发送测试图片（查看控制台）');
        }
        
        // 示例：请求标注数据
        function requestAnnotations() {
            console.log('请求获取标注数据...');
            alert('已请求标注数据（查看控制台）');
        }
        
        // 监听来自 iframe 的消息
        window.addEventListener('message', (event) => {
            console.log('收到消息:', event.data);
        });
    </script>
</body>
</html>